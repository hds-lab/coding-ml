<div class="ng-cloak" ng-cloak ng-controller="Aeonium.controllers.CodingController">
    <span us-spinner="Style.spinnerOptions" spinner-key="page-spinner"></span>
    <div id="coding">
        <div class="box" id="list-view">
            <span us-spinner="Style.spinnerOptions" spinner-key="list-view-spinner"></span>
            <h2>List</h2>

            <mini-list-view
                    height="800"
                    messages="allMessages"
                    selected-message="selectedMessage"
                    sort-messages="sortMessages(args)"
                    select-message="viewMessageDetail(args)">
            </mini-list-view>
        </div>
        <div class="box" id="labeling-view">
            <span us-spinner="Style.spinnerOptions" spinner-key="labeling-view-spinner"></span>
            <h2>Coding</h2>
            <div ng-show="!selectedMessageDetail">
                Select an item to label.
            </div>
            <div ng-show="selectedMessageDetail">
                <labeler
                        code-definitions="codeDefinitions"
                        selected-code-definition="selectedCodeDefinition"
                        message-detail="selectedMessageDetail"
                        on-code-selected="selectCode(codeDefinition)"
                        on-submit="submitLabel()"
                        on-open-media="openMedia(mediaUrl)"></labeler>
                <comments
                        message="selectedMessage"></comments>
            </div>
        </div>
        <div id="code-detail-view">
            <span us-spinner="Style.spinnerOptions" spinner-key="code-detail-view-spinner"></span>
            <div class="box" ng-show="!selectedCodeDefinition">
                <h2>Code Detail</h2>
                <div>Select a message and a code to view details</div>
            </div>
            <div class="box" ng-show="selectedCodeDefinition"
                 ng-style="Style.definitionStyle(selectedCodeDefinition.codeId)">
                <div class="box-section">
                    <definitions
                            master-definition="selectedCodeDefinition.masterDescription.text"
                            my-definition="selectedCodeDefinition.userDescription.text"
                            partner-definition="selectedCodeDefinition.partnerDescription.text"
                            code-name="selectedCodeDefinition.name"></definitions>
                </div>
                <div class="box-section">
                    <keywords
                            system-keywords="selectedCodeKeywords.systemKeywords"
                            my-keywords="selectedCodeKeywords.myKeywords"
                            partner-keywords="selectedCodeKeywords.partnerKeywords"
                            code-definitions="codeDefinitions"
                            code-name="selectedCodeDefinition.name"></keywords>
                </div>
            </div>
        </div>

        <div class="modal fade" id="image-modal" tabindex="-1" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h2 class="modal-title">Embedded image</h2>
                    </div>
                    <div class="modal-body">
                        <img class="img-responsive center-block" ng-src="{$ selectedMediaUrl $}">
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <modal show-modal="showSaveComment" ng-model="showSaveComment" class="modal fade"
               tabindex="-1" role="dialog" data-keyboard="false" data-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"
                                aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h2 class="modal-title">Save comments?</h2>
                    </div>
                    <div class="modal-body">
                        Do you want to save your comments for this item?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" ng-click="resetMessageComment()"
                                data-dismiss="modal">Discard
                        </button>
                        <button type="button" class="btn btn-primary" ng-click="saveMessageComment()">Save
                        </button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </modal>
    </div>
</div>